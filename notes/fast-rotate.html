<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="300" height="150" style="border:1px solid #d3d3d3;">
Your browser does not support the HTML5 canvas tag.</canvas>

<script>
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

var sine = {};
var cosine = {};

for (var i = 0; i < 2 * Math.PI; i += 0.01) {
var key = i.toFixed(2);
sine[key] = Math.sin(i);
cosine[key] = Math.cos(i);
}

var rot = 0.4;

setInterval(function () {
ctx.resetTransform();
ctx.clearRect(0, 0, 300, 150);

rot += 0.05;
rot %= Math.PI * 2;
key = rot.toFixed(2);

ctx.resetTransform();
//ctx.translate(100, 30);
//ctx.rotate(rot);
ctx.setTransform(cosine[key], sine[key], -sine[key], cosine[key], 100, 30);
ctx.fillRect(-25, -25, 50, 50);

ctx.resetTransform();
ctx.translate(200, 60);
ctx.rotate(rot);
ctx.fillRect(-25, -25, 50, 50);

}, 20);
</script>

</body>
</html>
